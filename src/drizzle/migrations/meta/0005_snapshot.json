{
  "id": "0b0f2cfc-a597-4ce3-8dd3-bbad72cf2163",
  "prevId": "878481d1-1500-4178-8ac6-4d48c42c0776",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.audit_logs": {
      "name": "audit_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "admin_id": {
          "name": "admin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "audit_logs_admin_id_users_id_fk": {
          "name": "audit_logs_admin_id_users_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "users",
          "columnsFrom": [
            "admin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.blockchain": {
      "name": "blockchain",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "index": {
          "name": "index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "voter_hash": {
          "name": "voter_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "candidate_id": {
          "name": "candidate_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "position_id": {
          "name": "position_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "election_id": {
          "name": "election_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "previous_hash": {
          "name": "previous_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "hash": {
          "name": "hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "blockchain_candidate_id_candidates_id_fk": {
          "name": "blockchain_candidate_id_candidates_id_fk",
          "tableFrom": "blockchain",
          "tableTo": "candidates",
          "columnsFrom": [
            "candidate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "blockchain_position_id_positions_id_fk": {
          "name": "blockchain_position_id_positions_id_fk",
          "tableFrom": "blockchain",
          "tableTo": "positions",
          "columnsFrom": [
            "position_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "blockchain_election_id_elections_id_fk": {
          "name": "blockchain_election_id_elections_id_fk",
          "tableFrom": "blockchain",
          "tableTo": "elections",
          "columnsFrom": [
            "election_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.candidate_applications": {
      "name": "candidate_applications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "position_id": {
          "name": "position_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "manifesto": {
          "name": "manifesto",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "documents_url": {
          "name": "documents_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "school_dean_status": {
          "name": "school_dean_status",
          "type": "approval_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "school_dean_id": {
          "name": "school_dean_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "school_dean_comment": {
          "name": "school_dean_comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "accounts_status": {
          "name": "accounts_status",
          "type": "approval_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "accounts_officer_id": {
          "name": "accounts_officer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "accounts_comment": {
          "name": "accounts_comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dean_of_students_status": {
          "name": "dean_of_students_status",
          "type": "approval_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "dean_of_students_id": {
          "name": "dean_of_students_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "dean_of_students_comment": {
          "name": "dean_of_students_comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "overall_status": {
          "name": "overall_status",
          "type": "approval_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "unique_application_per_position": {
          "name": "unique_application_per_position",
          "columns": [
            {
              "expression": "student_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "candidate_applications_student_id_users_id_fk": {
          "name": "candidate_applications_student_id_users_id_fk",
          "tableFrom": "candidate_applications",
          "tableTo": "users",
          "columnsFrom": [
            "student_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "candidate_applications_position_id_positions_id_fk": {
          "name": "candidate_applications_position_id_positions_id_fk",
          "tableFrom": "candidate_applications",
          "tableTo": "positions",
          "columnsFrom": [
            "position_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "candidate_applications_school_dean_id_users_id_fk": {
          "name": "candidate_applications_school_dean_id_users_id_fk",
          "tableFrom": "candidate_applications",
          "tableTo": "users",
          "columnsFrom": [
            "school_dean_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "candidate_applications_accounts_officer_id_users_id_fk": {
          "name": "candidate_applications_accounts_officer_id_users_id_fk",
          "tableFrom": "candidate_applications",
          "tableTo": "users",
          "columnsFrom": [
            "accounts_officer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "candidate_applications_dean_of_students_id_users_id_fk": {
          "name": "candidate_applications_dean_of_students_id_users_id_fk",
          "tableFrom": "candidate_applications",
          "tableTo": "users",
          "columnsFrom": [
            "dean_of_students_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.candidates": {
      "name": "candidates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "position_id": {
          "name": "position_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "photo_url": {
          "name": "photo_url",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "coalition_id": {
          "name": "coalition_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "school": {
          "name": "school",
          "type": "school",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "candidates_position_id_positions_id_fk": {
          "name": "candidates_position_id_positions_id_fk",
          "tableFrom": "candidates",
          "tableTo": "positions",
          "columnsFrom": [
            "position_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "candidates_coalition_id_coalitions_id_fk": {
          "name": "candidates_coalition_id_coalitions_id_fk",
          "tableFrom": "candidates",
          "tableTo": "coalitions",
          "columnsFrom": [
            "coalition_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.coalitions": {
      "name": "coalitions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.election_settings": {
      "name": "election_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "election_id": {
          "name": "election_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "max_votes_per_voter": {
          "name": "max_votes_per_voter",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false,
          "default": "'1'"
        },
        "anonymous": {
          "name": "anonymous",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "election_settings_election_id_elections_id_fk": {
          "name": "election_settings_election_id_elections_id_fk",
          "tableFrom": "election_settings",
          "tableTo": "elections",
          "columnsFrom": [
            "election_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.elections": {
      "name": "elections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "election_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'upcoming'"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "elections_created_by_users_id_fk": {
          "name": "elections_created_by_users_id_fk",
          "tableFrom": "elections",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.positions": {
      "name": "positions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "election_id": {
          "name": "election_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "school": {
          "name": "school",
          "type": "school",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "tier": {
          "name": "tier",
          "type": "position_tier",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "coalition_id": {
          "name": "coalition_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "positions_election_id_elections_id_fk": {
          "name": "positions_election_id_elections_id_fk",
          "tableFrom": "positions",
          "tableTo": "elections",
          "columnsFrom": [
            "election_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "positions_coalition_id_coalitions_id_fk": {
          "name": "positions_coalition_id_coalitions_id_fk",
          "tableFrom": "positions",
          "tableTo": "coalitions",
          "columnsFrom": [
            "coalition_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sessions": {
      "name": "sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "sessions_user_id_users_id_fk": {
          "name": "sessions_user_id_users_id_fk",
          "tableFrom": "sessions",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "reg_no": {
          "name": "reg_no",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'voter'"
        },
        "expected_graduation": {
          "name": "expected_graduation",
          "type": "varchar(7)",
          "primaryKey": false,
          "notNull": true
        },
        "graduation_status": {
          "name": "graduation_status",
          "type": "graduation_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "school": {
          "name": "school",
          "type": "school",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "profile_complete": {
          "name": "profile_complete",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "secret_code_hash": {
          "name": "secret_code_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "has_secret_code": {
          "name": "has_secret_code",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "face_embedding": {
          "name": "face_embedding",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "has_face_verification": {
          "name": "has_face_verification",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.votes": {
      "name": "votes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "voter_id": {
          "name": "voter_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "candidate_id": {
          "name": "candidate_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "position_id": {
          "name": "position_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "election_id": {
          "name": "election_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "unique_vote_per_position": {
          "name": "unique_vote_per_position",
          "columns": [
            {
              "expression": "voter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "votes_voter_id_users_id_fk": {
          "name": "votes_voter_id_users_id_fk",
          "tableFrom": "votes",
          "tableTo": "users",
          "columnsFrom": [
            "voter_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "votes_candidate_id_candidates_id_fk": {
          "name": "votes_candidate_id_candidates_id_fk",
          "tableFrom": "votes",
          "tableTo": "candidates",
          "columnsFrom": [
            "candidate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "votes_position_id_positions_id_fk": {
          "name": "votes_position_id_positions_id_fk",
          "tableFrom": "votes",
          "tableTo": "positions",
          "columnsFrom": [
            "position_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "votes_election_id_elections_id_fk": {
          "name": "votes_election_id_elections_id_fk",
          "tableFrom": "votes",
          "tableTo": "elections",
          "columnsFrom": [
            "election_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.dean_role": {
      "name": "dean_role",
      "schema": "public",
      "values": [
        "Dean_of_Science",
        "Dean_of_Education",
        "Dean_of_Business",
        "Dean_of_Humanities_and_Developmental_Studies",
        "Dean_of_TVET",
        "Dean_of_Students"
      ]
    },
    "public.school": {
      "name": "school",
      "schema": "public",
      "values": [
        "Science",
        "Education",
        "Business",
        "Humanities and Developmental_Studies",
        "TVET"
      ]
    },
    "public.approval_status": {
      "name": "approval_status",
      "schema": "public",
      "values": [
        "PENDING",
        "APPROVED",
        "REJECTED"
      ]
    },
    "public.election_status": {
      "name": "election_status",
      "schema": "public",
      "values": [
        "upcoming",
        "ongoing",
        "finished"
      ]
    },
    "public.graduation_status": {
      "name": "graduation_status",
      "schema": "public",
      "values": [
        "active",
        "graduated",
        "deferred",
        "inactive"
      ]
    },
    "public.position_tier": {
      "name": "position_tier",
      "schema": "public",
      "values": [
        "school",
        "university"
      ]
    },
    "public.user_role": {
      "name": "user_role",
      "schema": "public",
      "values": [
        "voter",
        "admin",
        "Dean_of_Science",
        "Dean_of_Education",
        "Dean_of_Business",
        "Dean_of_Humanities_and_Developmental_Studies",
        "Dean_of_TVET",
        "Dean_of_Students",
        "Accountant"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}